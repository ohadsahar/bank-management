<mat-form-field id="search">
  <input matInput (keyup)="applyFilter($event.target.value)" placeholder="חיפוש חופשי">
</mat-form-field>

<table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort (matSortChange)="sortData($event)">

  <ng-container matColumnDef="cardName">
    <th mat-header-cell *matHeaderCellDef> <i class="fab fa-cc-visa"></i> שם הכרטיס </th>
    <td mat-cell *matCellDef="let element; let i = index"> <i class="fas fa-trash"
      (click)="deleteTranscation(element._id, element)"></i> {{element.cardName}}
    </td>
  </ng-container>
  <!-- Name Column -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef> <i class="fab fa-product-hunt"></i> שם המוצר </th>
    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
  </ng-container>
  <!-- Type of product  Column -->
  <ng-container matColumnDef="type">
    <th mat-header-cell *matHeaderCellDef><i class="fas fa-sitemap"></i> סוג מוצר </th>
    <td mat-cell *matCellDef="let element"> {{element.typeProduct}} </td>
  </ng-container>
  <!-- Total price Column -->
  <ng-container matColumnDef="price">
    <th mat-sort-header="price" mat-header-cell *matHeaderCellDef> <i class="fas fa-shekel-sign"></i> מחיר כללי </th>
    <td mat-cell *matCellDef="let element"> <i class="fas fa-shekel-sign"></i> {{element.price}} </td>
  </ng-container>
  <!-- Payments Column -->
  <ng-container matColumnDef="numberofpayments">
    <th mat-sort-header="numberofpayments" mat-header-cell *matHeaderCellDef> <i class="fas fa-shopping-bag"></i> מספר
      תשלומים </th>
    <td mat-cell *matCellDef="let element"> {{element.numberofpayments}} </td>
  </ng-container>
  <ng-container matColumnDef="eachMonth">
    <th mat-sort-header="eachMonth" mat-header-cell *matHeaderCellDef> <i class="fas fa-cart-arrow-down"></i> תשלום
      חודשי </th>
    <td mat-cell *matCellDef="let element"> <i class="fas fa-shekel-sign"></i> {{element.eachMonth}} </td>
  </ng-container>
  <ng-container matColumnDef="leftPayments">
    <th mat-sort-header="leftPayments" mat-header-cell *matHeaderCellDef><i class="fas fa-trophy"></i> תשלומים שנשארו
    </th>
    <td mat-cell *matCellDef="let element"> {{element.leftPayments}} </td>
  </ng-container>
  <ng-container matColumnDef="purchaseDate">
    <th mat-sort-header="purchaseDate" mat-header-cell *matHeaderCellDef><i class="far fa-calendar-check"></i> תאריך
      קניה</th>
    <td mat-cell *matCellDef="let element"> {{element.purchaseDate}} </td>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>
<mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
<ng-container>

  <div class="input-new-transcation">
    <td>
      <mat-form-field class="new-transcation">
        <input matInput type="text" [(ngModel)]="bankTransaction.cardName" required>
        <mat-placeholder class="placeholder">שם הכרטיס</mat-placeholder>
        <mat-error>חובה למלא שם כרטיס</mat-error>
      </mat-form-field>
    </td>
    <td>
      <mat-form-field class="new-transcation">
        <input matInput type="text" [(ngModel)]="bankTransaction.name" required>
        <mat-placeholder class="placeholder">שם המוצר</mat-placeholder>
        <mat-error>חובה למלא שם מוצר</mat-error>
      </mat-form-field>
    </td>
    <mat-form-field class="new-transcation">

      <td>
        <input matInput type="text" [(ngModel)]="bankTransaction.typeProduct" required></td>
      <mat-placeholder class="placeholder">סוג המוצר</mat-placeholder>
      <mat-error>חובה למלא את סוג המוצר </mat-error>
    </mat-form-field>

    <mat-form-field class="new-transcation">
      <td><input matInput type="number" [(ngModel)]="bankTransaction.price" required></td>
      <mat-placeholder class="placeholder">מחיר כללי</mat-placeholder>
      <mat-error>חובה למלא את המחיר הכללי </mat-error>
    </mat-form-field>

    <mat-form-field class="new-transcation">
      <td><input matInput type="number" [(ngModel)]="bankTransaction.numberofpayments" (input)="calculateEachMonth()">
      </td>
      <mat-placeholder class="placeholder">מספר תשלומים</mat-placeholder>
    </mat-form-field>

    <mat-form-field class="new-transcation">
      <td><input matInput type="number" [(ngModel)]="bankTransaction.eachMonth" [disabled]="true"></td>
      <mat-placeholder class="placeholder">תשלום חודשי</mat-placeholder>

    </mat-form-field>

    <mat-form-field class="new-transcation">
      <td><input matInput type="number" [(ngModel)]="bankTransaction.leftPayments" [disabled]="true"></td>
      <mat-placeholder class="placeholder">תשלומים שנותרו</mat-placeholder>
    </mat-form-field>
    <td>
      <button mat-raised-button color="primary" type="button" (click)="registerNewTranscation()"
        id="new-transcation-button">אישור</button>
    </td>
  </div>

</ng-container>


<h1>ניתוח מצב פיננסי</h1>
<div class="money-managment-area">
  <h3 *ngIf="totalExpenses">הוצאות: <i class="fas fa-shekel-sign"></i> {{totalExpenses}}</h3>
  <h3 *ngIf="numberOfPayments">מספר תשלומים כללי: <i class="fas fa-money-check-alt"></i> {{numberOfPayments}}</h3>
  <h3 *ngIf="monthExpenses"> הוצאות קבועות כל חודש: <i class="fas fa-shekel-sign"></i> {{monthExpenses}} </h3>
</div>
